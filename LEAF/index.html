<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Nissan LEAF</title>
	<link rel="stylesheet" href="css/estilos_home.css">
	<link rel="stylesheet" type="text/css" href="css/flip.css">
	<link rel="stylesheet" type="text/css" href="css/msnry.css">
</head>
<body>

	<div class="container">
		<header>
			<!--Mide 100px y al inicio va sólo en blanco-->
		</header>
		<section id="secgif">
			<!--Yo soy la sección que lleva el GIF-->
			
		</section>
		<section id="sec01">
			<div id="contsec01">
				<div id="logo">
					<img src="img/logo.png" alt="" id="imglogo">
				</div>
				<div id="menup">
					<ul id="menuli">
						<li class="elemenup"><a href="http://nissan.com.mx/">Manéjalo</a></li>
						<li class="elemenup"><a href="especificaciones.html">Especificaciones</a></li>
						<li class="elemenup"><a href="estaciones.html">Estaciones de Recarga</a></li>
						<li class="elemenup"><a href="qmasmason.html">Preguntas Frecuentes</a></li>
					</ul>
				</div>
				<div id="imgauto1">
					<div id="mySpriteSpin"></div>
				</div>
				<div id="textosmenup">
					<h1>NISSAN LEAF 100% ELÉCTRICO</h1>
					<p>La experiencia de Nissan LEAF® está revolucionando al mundo. Día a día, más personas están descubriendo un nuevo paradigma y no hay vuelta atrás. Lo estabas esperando: es la última innovación tecnológica que cambiará para siempre la manera de transportarte. </p>
				</div>
			</div>
		</section>
		<section id="secfoto01">
			<!--Yo soy la sección de VIDEO1 del coche-->
			<div></div>
		</section>
		<section id="secmix">
			<div id="contsecmix">
				<div id="mixsuperior">
					<h2>Un nuevo gadget en tu vida.</h2>
					<p>Deja atrás el pasado. Nissan LEAF® es una actualización completa de sistema operativo para el mundo. Tiene una apariencia icónica y energética, compuesta por líneas fluidas diseñadas para reducir el ruido exterior y mejorar la autonomía del auto. Y es que, en cada una de sus partes está presente la innovación.</p>
				</div>
				<div id="imgsobre">
					<img src="img/LEAF-m/CarUnNuevoGadgetEnTuVida.png" alt="">
				</div>
				<div id="mixinferior">
					<div id="iconmotor">
						<img src="img/Leaf-y/motor-electrico.png" alt="">
						<h3>Motor 100% eléctrico</h3>
						<p>El motor eléctrico conserva la emoción de manejar y el medio ambiente. Y es que, brinda el mismo desempeño que un motor de combustión interna, pero de manera silenciosa y más amigable con el planeta. </p>
					</div>
					<div id="iconmateriales">
						<img src="img/LEAF-m/materialesReciclados.png" alt="">
						<h3>Materiales reciclados</h3>
						<p>El 90/95% [pendiente corroborar dato] del auto está fabricado con plásticos reciclados provenientes de electrodomésticos y parachoques, así como telas recicladas y tela bio PET; todos ellos libres de emisiones de CO2.  </p>
					</div>
				</div>
			</div>
		</section>
		<section id="zero">
			Yo soy la sección de las zero emisiones	
		</section>
		<section id="interior">
			
			<!--Yo soy la sección de la foto interior-->
		</section>
		<section id="secfoto02">
			<!--Yo soy la sección de la segunda foto del coche-->
			
		</section>
		<section id="ingenieria">
			<div>
				<img src="img/LEAF-m/FotoGenerador.png">
			</div>
		</section>
		<section id="menusecu">
			Yo soy la sección con menu secundario
		</section>
		<section id="limpia">
			Yo soy la sección de energía limpia
			<!--Mide 450px-->
		</section>
		<section id="cargadores">
			<!--Soy la sección donde aparecen los cargadores -->
			
		</section>
		<section id="autonomia">
			Yo soy la sección de autonomía
			<!--Mide 350px-->
		</section>
		<section id="secfoto03">
			<!--Soy la tercera sección de pura foto-->
			
		</section>
		<section id="seguridad">
			<!--Yo soy la sección de sistemas de seguridad-->
			
		</section>
		<section id="secfoto04">
			<!--Yo soy la cuarta sección de pura foto-->
			
		</section>
		<a id="faq_l"></a>
		<!-- La parte de las preguntas -->
		<div id="faq">
			<div>
				<h1>Todo lo que quieres saber <br/>de Nissan LEAF®</h1>
				<h4>Las nuevas tecnología conllevan mitos e inquietudes. <br/>Aquí se aclararán tus dudas.</h4>
			</div>
			<div id="caja">
				<input id="words" type="text" placeholder="Escribe una pregunta o palabra relacionada con tu duda " />
				<button></button>
			</div>
			
			<div class="qcards"></div>
		</div>
		<footer>
			<!--Mide 100px-->
			El footer y su menu
		</footer>
	</div>

	<script type="text/javascript" src="//code.jquery.com/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/0.9.9/jquery.magnific-popup.min.js"></script>
	<script src="js/masonry.pkgd.min.js"></script>
	<script type="text/javascript" src="js/jquery.videoBG.js"></script>
	<script type='text/javascript' src='js/spritespin.min.js' ></script>
	<script type="text/javascript">
	$(document).ready(function() {
		$('#sec_foto1').videoBG({
			mp4:'videos/leaf_video_index_dos.webmsd.mp4',
			ogv:'videos/leaf_video_index_dos.webmsd.ogv',
			webm:'videos/leaf_video_index_dos.webmsd.webm',
			poster:'img/LEAF-m/video.png',
			scale:true,
			loop: true,
			zIndex: 1000
		});
		$('#secfoto03').videoBG({
			mp4:'videos/leaf_video_index_dos.webmsd.mp4',
			ogv:'videos/leaf_video_index_dos.webmsd.ogv',
			webm:'videos/leaf_video_index_dos.webmsd.webm',
			poster:'img/LEAF-m/video.png',
			scale:true,
			loop: true,
			zIndex: 1000
		});
		$('#secfoto04').videoBG({
			mp4:'videos/leaf_video_index_tres.webmsd.mp4',
			ogv:'videos/leaf_video_index_tres.webmsd.ogv',
			webm:'videos/leaf_video_index_tres.webmsd.webm',
			poster:'img/LEAF-m/video.png',
			scale:true,
			loop: true,
			zIndex: 1000
		});
	});
		
	</script>
	<script type='text/javascript' src='js/index.js' ></script>
		<script type="text/javascript">
		function setFlipClick() {
			$('.flip-container').unbind("click");
			$('.flip-container').click(function(event) {
				var $t = $(this);
				var t = $t[0];
				t.classList.toggle("hover");
			});
			
		}
		var $container = $('.qcards');
		// initialize
		$container.masonry({
		  	columnWidth: 60,
		  	itemSelector: '.qcard'
		});
		setFlipClick();
	</script>
	<script type="text/javascript">
		var the_qs;
		function contains_in_tag(obj, w) {
			var tags = obj.tags.trim().split(",");
			for (var i = 0; i < tags.length; i++) {
				var tag = tags[i].toLowerCase();
				if (tag == w.toLowerCase()) {
					return true;
				}
			}
			return false;
		}
		function newFlipElement(p, r) {
			// <div class='flip-container qcard'>
			// 	<div class='flipper'>
			// 		<div class='front-flip'>
			// 			pregunta
			// 		</div>
			// 		<div class='back-flip'>
			// 			respuesta
			// 		</div>
			// 	</div>
			// </div> 
			var root = document.createElement('div');
			root.className = 'flip-container qcard flipper';
			// $p = $("<div class='flip-content'>" + 
			// 			p + 
			// 		"</div>");
			// $r = $("<div class='flip-content'>" + 
			// 			r + 
			// 		"</div>");
			// $frontflip = $("<div class='front-flip'></div>");
			// $backflip = $("<div class='back-flip'></div>");
			// $flipper = $("<div class='flipper'></div>");

			// var rheight = $r.height();
			// $(root).height(rheight);
			// $frontflip.height(rheight);
			// $backflip.height(rheight);

			// $frontflip.append($p);
			// $backflip.append($r);

			// $(root).append($flipper);
			// $flipper.append($frontflip).append($backflip)

			$r = $("<div>" + 
						r + 
					"</div>");

			$(root).append("<div class='front-flip'>" + 
								"<div class='flip-content'>" + 
								p + 
								"</div>" +
							"</div>" + 
							"<div class='back-flip'>" +
								"<img class='cerrarq' src='img/cerrarq.png'>"+
								"<div class='flip-content'>" + 
								r + 
								"</div>" + 
							"</div>" );
			// fixHeight(root);
			var vmax = Math.max(r.length*0.6, p.length);
			$(root).height(vmax);
			$(root).children('.front-flip, .back-flip').height(vmax);
			return {dom:root, height:$r.height()};
		}
		function vaciarGrid(listener) {
			// $('.flip-container').hide(500, function() {
			// 	$container.empty();
			// 	listener();
			// });
			$container.empty().masonry( 'layout' );
			listener();
		}
		function find(q) {
			var items = [];
			var tams = [];
			var fragment = document.createDocumentFragment();
			var words = q.trim().split(" ");
			$.each( the_qs, function( key, val ) {
				
				for (var i = 0; i < words.length; i++) {
					var word = words[i];
					if (contains_in_tag(val, word)) {
						var elem = newFlipElement(val.p, val.r);
						items.push(elem.dom);
						tams.push(elem.height);
						continue;
					}
				};
				
			});
			function llenarGrid() {
				$container.append( items ).masonry( 'appended', items );
				// for (var i = 0; i < items.length; i++) {
				// 	var h = tams[i];
				// 	$(items[i]).css('height',h);
				// 	$(items[i]).children('.front-flip').css('height',h);
				// 	$(items[i]).children('.back-flip').css('height',h);
				// };
				// $container.masonry( 'layout' );
				var vmax = Math.max($container.height()+260, 800);
				// $('#faq').height(vmax);
				$('#faq').animate({
					height:vmax
				});
				setFlipClick();
			}
			if ($container.children().length > 0) {
				vaciarGrid(llenarGrid);
			}
			else {
				llenarGrid();
			}
		}
		$( "#words" ).keyup(function() {
			var q = $('#words').val();
			if (q.length == 0) {
				vaciarGrid();
			}
		});
		$('#caja > button').click(function(event) {
			var q = $('#words').val();

			if (the_qs == null) {
				$.getJSON( "inf/p.json", function( data ) {
					the_qs = data;
					find(q);
				});
			}
			else {
				find(q);
			}
		});
	</script>
</body>
</html>